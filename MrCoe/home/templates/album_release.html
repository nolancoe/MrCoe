{% extends "base.html" %}
{% load static %}

{% block content %}

</br></br></br>

<div class="d-flex justify-content-center mt-5">
  <div class="card shadow-lg" style="
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(2px);
      -webkit-backdrop-filter: blur(2px);
      border-radius: 1rem;
      max-width: 800px;
      width: 95%;
      padding: 2rem;
      box-shadow:
            0 8px 20px rgba(0, 0, 0, 0.4),     /* primary shadow */
            0 4px 6px rgba(0, 0, 0, 0.3),       /* soft inner */
            inset 0 0 10px rgba(255, 255, 255, 0.05); /* subtle glow */
  ">
    <div class="card-body">

      <!-- 🔗 Streaming Links as Icons -->
      <div class="d-flex justify-content-center mb-3 gap-4 fs-3">
        {% if stream_links.spotify %}
          <a href="{{ stream_links.spotify }}" target="_blank" class="text-secondary" title="Spotify">
            <i class="fab fa-spotify fa-lg"></i>
          </a>
        {% endif %}
        {% if stream_links.apple_music %}
          <a href="{{ stream_links.apple_music }}" target="_blank" class="text-secondary" title="Apple Music">
            <i class="fab fa-apple fa-lg"></i>
          </a>
        {% endif %}
        {% if stream_links.youtube_music %}
          <a href="{{ stream_links.youtube_music }}" target="_blank" class="text-secondary" title="YouTube Music">
            <i class="fab fa-youtube fa-lg"></i>
          </a>
        {% endif %}
        {% if stream_links.distrokid %}
          <a href="{{ stream_links.distrokid }}" target="_blank" class="text-secondary" title="More Platforms">
            <i class="fas fa-globe fa-lg"></i>
          </a>
        {% endif %}
      </div>

      <!-- 🎵 Album Cover -->
      <div class="d-flex justify-content-center">
        <img src="{% static cover %}" 
          class="img-fluid rounded shadow-lg mb-4" 
          alt="Album Cover" 
          style="max-width: 300px;">
      </div>

      <!-- 📝 Album Title -->
      <h1 class="text-light">{{ album }}</h1>

      <!-- 🎧 Global Audio Player -->
      <div id="global-player" class="custom-player px-3 py-2 mb-4">
        
        <!-- Current Track or Album Title -->
        <h5 id="current-track-title" class="text-white text-center mb-2">
          Mr. Coe
        </h5>

        <!-- Progress Bar & Time -->
        <div class="d-flex align-items-center mb-1">
          <input type="range" id="global-progress" class="form-range flex-grow-1" value="0" min="0" step="1">
          <span id="global-time" class="text-light small" style="min-width: 45px;">0:00</span>
        </div>

        <!-- Controls -->
        <div class="d-flex justify-content-center">
          <button id="prev-btn" class="btn btn-outline-light btn-sm px-2 py-1">
            <i class="fas fa-backward"></i>
          </button>

          <button id="global-play-btn" class="btn btn-sm btn-outline-light d-flex align-items-center justify-content-center" style="width: 40px; height: 40px;">
            <i class="fas fa-play"></i>
          </button>

          <button id="next-btn" class="btn btn-outline-light btn-sm px-2 py-1">
            <i class="fas fa-forward"></i>
          </button>
        </div>
      </div>

      <audio id="global-audio" preload="auto" style="display: none;"></audio>

      <!-- 🔊 Track List -->
      {% for track in tracks %}
        <div class="track-row text-start mb-3 px-3 py-2 d-flex align-items-center justify-content-between" data-src="{% static track.file %}">
          <span class="text-light fw-semibold">{{ forloop.counter }}. {{ track.title }}</span>
          <i class="fas fa-music text-secondary"></i>
        </div>
      {% endfor %}

    </div>
  </div>
</div>

<!-- 🎥 YouTube Embed -->
<div class="ratio ratio-16x9 mt-5">
  <iframe 
    src="https://www.youtube.com/embed/UFIPoI8khBI" 
    title="YouTube video" 
    allowfullscreen 
    style="border-radius: 12px;">
  </iframe>
</div>

{% endblock %}
