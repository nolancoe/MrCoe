{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Presave My New Album{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Font Awesome for Icons -->
    <script src="https://kit.fontawesome.com/e797960720.js" crossorigin="anonymous"></script>


    <!-- ✅ Open Graph Tags (Facebook, LinkedIn, etc.) -->
    <meta property="og:title" content="New Album 'Mr. Coe' Out Now!">
    <meta property="og:description" content="'{{ album }}' releasing {{ release_date }}.">
    <meta property="og:image" content="https://nolancoe.com{% static cover %}">
    <meta property="og:url" content="https://nolancoe.com">
    <meta property="og:type" content="website">

    <style>

        /* Fallback image container */
        .bg-wrapper {
            position: fixed;
            top: 0; left: 0;
            width: 100vw;
            height: 100vh;
            background: url("{% static 'images/FallbackBackground.png' %}") no-repeat center center;
            background-size: cover;
            z-index: -3;
        }
    
        .bg-video {
            position: fixed;
            top: 0; left: 0;
            width: 100vw;
            height: 100vh;
            object-fit: cover;
            z-index: -1;
        }
    
        .overlay-content {
            position: relative;
            z-index: 2;
        }
    
        .overlay {
            position: fixed;
            top: 0; left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1;
        }
    
        .custom-player {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 1rem;
            padding: 1rem;
            max-width: 500px;
            margin: 2rem auto;

            box-shadow:
            0 8px 20px rgba(0, 0, 0, 0.4),     /* primary shadow */
            0 4px 6px rgba(0, 0, 0, 0.3),       /* soft inner */
            inset 0 0 10px rgba(255, 255, 255, 0.05); /* subtle glow */

        }
      
        .play-btn i {
            font-size: 20px;
        }
    
        input[type="range"] {
            width: 100%;
            background: rgba(255, 255, 255, 0.3);
            height: 5px;
        }
    
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 14px;
            width: 14px;
            border-radius: 50%;
            background: #0dcaf0;
            border: 2px solid white;
        }
    
        input[type="range"]::-moz-range-thumb {
            height: 14px;
            width: 14px;
            border-radius: 50%;
            background: #0dcaf0;
            border: 2px solid white;
        }

        .track-row.selected {
            background-color: rgba(255, 255, 255, 0.15) !important;
            border-radius: 0.5rem;
            transition: background-color 0.2s ease;
        }

        custom-shadow {
            box-shadow:
            0 8px 20px rgba(0, 0, 0, 0.4),     /* primary shadow */
            0 4px 6px rgba(0, 0, 0, 0.3),       /* soft inner */
            inset 0 0 10px rgba(255, 255, 255, 0.05); /* subtle glow */
        }
    
    </style>

    {% block head %}{% endblock %}
</head>
<body class="text-light text-center d-flex flex-column justify-content-center align-items-center min-vh-100">


    <!-- ✅ Background image fallback (always there behind everything) -->
    <div class="bg-wrapper"></div>

    <!-- Background Video -->
    <video class="bg-video" autoplay muted loop playsinline>
        <source src="{% static 'videos/LavaLamp2.mp4' %}" type="video/mp4">
        Your browser does not support the video tag.
    </video>

    <!-- Optional dark overlay (for readability) -->
    <div class="overlay"></div>

    <!-- Content -->
    <div class="container overlay-content">
        {% block content %}{% endblock %}
    </div>

    </br>
    <!-- Footer -->
<footer class="text-center mt-5" style="position: relative; z-index: 5;">
    <hr class="mx-auto border-4 border rounded-3 mt-4" style="width:100%">
    <a href="https://www.youtube.com/@NolanCoe" target="_blank" class="text-light fs-3 mx-1 d-inline-block">
        <i class="fab fa-youtube"></i>
    </a>
    <a href="https://x.com/nolancoe" target="_blank" class="text-light fs-3 mx-1 d-inline-block">
        <i class="fab fa-x-twitter"></i>
    </a>
    <a href="https://instagram.com/nolancoe" target="_blank" class="text-light fs-3 mx-1 d-inline-block">
        <i class="fab fa-instagram"></i>
    </a>
    <a href="https://tiktok.com/@nolan.coe" target="_blank" class="text-light fs-3 mx-1 d-inline-block">
        <i class="fab fa-tiktok"></i>
    </a>
    </br>
</footer>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            document.querySelectorAll('footer a i').forEach(icon => {
                icon.parentElement.addEventListener('mouseenter', () => {
                    icon.classList.add('fa-beat-fade');
                });
                icon.parentElement.addEventListener('mouseleave', () => {
                    icon.classList.remove('fa-beat-fade');
                });
            });
        });
        </script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const audio = document.getElementById('global-audio');
            const playBtn = document.getElementById('global-play-btn');
            const icon = playBtn.querySelector('i');
            const range = document.getElementById('global-progress');
            const time = document.getElementById('global-time');
            let currentTrackSrc = '';
            let isPlaying = false;
        
            // Track selection logic
            document.querySelectorAll('.track-row').forEach(row => {
                row.addEventListener('click', () => {
                    const newSrc = row.getAttribute('data-src');
        
                    if (newSrc !== currentTrackSrc) {
                        audio.src = newSrc;
                        currentTrackSrc = newSrc;
                        audio.play();
                        isPlaying = true;
                        icon.classList.replace('fa-play', 'fa-pause');
        
                        document.querySelectorAll('.track-row').forEach(r => r.classList.remove('selected'));
                        row.classList.add('selected');
                    }
                });
            });
        
            playBtn.addEventListener('click', () => {
                if (!currentTrackSrc) return;
        
                if (audio.paused) {
                    audio.play();
                    icon.classList.replace('fa-play', 'fa-pause');
                    isPlaying = true;
                } else {
                    audio.pause();
                    icon.classList.replace('fa-pause', 'fa-play');
                    isPlaying = false;
                }
            });
        
            audio.addEventListener('timeupdate', () => {
                const current = Math.floor(audio.currentTime);
                const duration = Math.floor(audio.duration || 0);
                range.max = duration;
                range.value = current;
                time.textContent = formatTime(current);
            });
        
            range.addEventListener('input', () => {
                audio.currentTime = range.value;
            });
        
            audio.addEventListener('ended', () => {
                icon.classList.replace('fa-pause', 'fa-play');
                isPlaying = false;
            });
        
            function formatTime(seconds) {
                const mins = Math.floor(seconds / 60);
                const secs = seconds % 60;
                return `${mins}:${secs.toString().padStart(2, '0')}`;
            }
        });
    </script>
    </br></br></br>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
        {% block scripts %}{% endblock %}
</body>
</html>
